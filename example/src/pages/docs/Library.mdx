---
layout: src/layouts/MdxLayout.astro
title: Reusables
---

# Reusable Components

The Bag of Tricks for View Transitions consists of several tech demos, background information and practical advice. It also offers reusable components that can be used in your own projects.

## Contents

## Debug Component

The `<VtBotDebug>` component logs the view transition events and their data. It is useful for debugging and understanding the inner workings of the view transition. By default it will only be active in DEV mode.

### Usage

The `<VtBotDebug>` component should be inserted as early as possible in the `<head>` of the page you want to investigate. 

```astro title="MyPage.astro" {3,7}
---
import { ViewTransitions } from 'astro:transitions';
import { VtBotDebug } from 'astro-vt-bot';
---
...
<head>
	<VtBotDebug />
	<ViewTransitions />
	...
</head>
...
```
It supports three boolean properties:
|   Property | Effect |
|------------|---------|
| overlay| Redirect the output from the console to an on-screen overlay.|
| hideProperties | When `overlay` is used, hide the properties of the events to produce shorter logs.|
| production | Be active in production mode. Helpful when chasing bugs the do onl show up in production.|

During view transitions, the `<VtBotDebug>` component logs three types of information to the console:
* Astro's view transition events and their properties 
* The beginning and end for the executions of `loader()` and `swap()`
* The viewTransition promises `ready`, `updateCallbackDone` and `finished` as they resolve respectively reject

If a property is altered by an event handler, the output will show the original and the final vaue of that property. 

```shell title="log.txt" {1,21,22,26,29} 
21:54:50.465 [vtbot-debug] Event handler for astro:before-preparation
21:54:50.465 Properties
21:54:50.465   type: astro:before-preparation
21:54:50.465   cancelable: true
21:54:50.465   defaultPrevented: false
21:54:50.466   from: http://localhost:4321/loading/two/
21:54:50.466   to: http://localhost:4321/loading/one/
21:54:50.466   direction: forward
21:54:50.466   navigationType: push
21:54:50.466   info: undefined
21:54:50.466   newDocument: [object HTMLDocument]
21:54:50.466   formData: undefined
21:54:50.466   loader changed from function () { [native code] } to async () => {
			console.log('[loading] Simulating slow load. Waiting 2 seconds');
			await new Promise((resolve) => setTimeout(resolve, 2000));
			await originalLoader();
		}
21:54:50.466 [vtbot-debug] before execution of loader()
21:54:50.466 [loading] Simulating slow load. Waiting 2 seconds
21:54:52.483 [vtbot-debug] after execution of loader()
21:54:52.483 [vtbot-debug] Event handler for astro:after-preparation
21:54:52.497 [vtbot-debug] Event handler for astro:before-swap
21:54:52.497 Properties
21:54:52.498 [vtbot-debug] before execution of swap()
21:54:52.501 [vtbot-debug] after execution of swap()
21:54:52.502 [vtbot-debug] Event handler for astro:after-swap
21:54:52.502 [vtbot-debug] viewTransition.updateCallbackDone resolve
21:54:52.503 [vtbot-debug] viewTransition.ready resolve
21:54:52.503 [vtbot-debug] Event handler for astro:page-load
21:54:53.030 [vtbot-debug] viewTransition.finished resolve
```
